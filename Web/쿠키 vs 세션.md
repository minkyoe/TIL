## 쿠키 vs 세션

### HTTP 특징

**Connectionless**

- 비연결지향
- 클라이언트와 서버가 요청과 응답을 주고받은 뒤 접속을 끊음

**Stateless**

- 상태 정보 유지 안함
- HTTP 통신은 요청을 응답하고 접속을 끊기 때문에 클라이언트의 상태정보를 알 수 없음



### 쿠키란?

- key - value 타입

- 유효시간 정할 수 있음 (브라우저 종료되어도 살아있음)

- 클라이언트에 300개까지 쿠키저장 가능, 하나의 도메인당 20개의 값만 가질 수 있음, 하나의 쿠키값은 4KB까지 저장

- 동작 방식

  - 클라이언트가 페이지 요청
  - 서버에서 쿠키 생성, HTTP 헤더에 쿠키 포함시켜 응답
  - 클라이언트에서 쿠키 보관
  - 같은 요청인 경우, HTTP 헤더에 쿠키를 함께 보냄
  - 서버에서 쿠키를 읽어, 정보 변경해야하면 쿠키 업뎃하여 HTTP헤더에 포함시켜 응답

- 사용 예

  - "아이디와 비밀번호 저장?"
  - 쇼핑몰 장바구니
  - 자동로그인 체크, "오늘 더 이상 이 창을 보지 않음" 체크

  

### 세션이란?

- 서버 측에서 관리
- 서버에서 클라이언트 구분을 위해 세션 ID 부여
- 웹 브라우저가 서버에 접속해서 브라우저 종료할 때까지 인증상태 유지
- 쿠키보다 보안에 좋지만, 사용자 많아질수록 서버 메모리 많이 차지함
  - 동접자 많은 웹 사이트면 서버에 과부하 -> 성능 저하됨

- 동작 방식
  - 클라이언트가 서버에 접속 시 세션 ID 발급 받음
  - 클라이언트는 세션 ID에 대해 쿠키를 사용해서 저장하고 가지고 있음
  - 클라이언트는 서버에 요청할 때, 이 쿠키의 세션 ID를 전달
  - 서버는 세션 ID 전달 받아서 세션에 있는 클라이언트 정보 가져옴
  - 클라이언트 정보를 가지고 응답



### 차이점

- 비슷한 역할과 동작 원리 (세션도 결국 쿠키 사용하기 때문)
- 사용자의 정보 저장 위치!! 
  - 쿠키는 서버의 자원 사용 X
- 세션이 보안면에서 더 우수 (로컬에 세션ID만 저장하기 때문)
  - 쿠키는 변질되거나 request에서 스니핑 당할 위험
- 쿠키가 요청 속도면에서 더 빠름 (세션은 서버 처리 필요하기에)







> 참고
>
> https://interconnection.tistory.com/74